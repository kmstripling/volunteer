import React, { useState} from "react";
import axios from 'axios';

const testData = [
  {"id":1,"name":"Basketball","startdatetime":"2022-11-19T18:00:00Z","enddatetime":"2022-11-19T22:00:00Z"},
  {"id":2,"name":"Basketball","startdatetime":"2022-11-26T18:00:00Z","enddatetime":"2022-11-26T22:00:00Z"},
  {"id":3,"name":"Card Show","startdatetime":"2022-12-15T08:00:00Z","enddatetime":"2022-12-15T18:00:00Z"}
];

const EventList = (props) => (

  <div>
    {props.v_events.map(v_event => <VEvent key={v_event.id} {...v_event}/>)}
  </div>

)

class VEvent extends React.Component{

  render() {
    const v_event = this.props;
    return (
      <div className="volunteer-event">
              <div className="volunteer-id">{v_event.id} </div>
              <div className="volunteer-event-name">{v_event.name} </div>
              <div className="volunteer-startdatetime">{v_event.startdatetime}</div>
              <div className="volunteer-enddatetime">{v_event.enddatetime}</div>
      </div>

    )
  }
}

class Form extends React.Component {

  handleSubmit = async (event) => {
  	event.preventDefault();

    const resp = await axios.get(`http://localhost:3000/events`);
    console.log(resp.data);
    this.props.onSubmit(resp.data);
  };

  render() {
    return(
    <form onSubmit={this.handleSubmit}>
      <button>Refresh Event List</button>
    </form>
    )
}
}

const App = () => {

  const [v_events, setV_events] = useState(testData);

  return (
    <div>
      <div className="header">Volunteer App</div>
      <EventList v_events={v_events}/>
      <Form onSubmit={setV_events} />

    </div>
  );

}

export default App;